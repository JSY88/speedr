<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¹ ë¥¸ ì½ê¸° í›ˆë ¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            color: white;
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .controls {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
        }

        .control-row {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        input[type="range"], input[type="number"], select, input[type="color"] {
            padding: 8px 12px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        input[type="range"] {
            flex: 1;
            min-width: 120px;
        }

        input[type="number"] {
            width: 80px;
        }

        input[type="color"] {
            width: 50px;
            height: 40px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        select {
            min-width: 120px;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: -9999px;
        }

        .file-input-label {
            display: block;
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
        }

        .file-input-label:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ff7b7b 0%, #ff6b6b 100%);
            color: white;
        }

        .btn-tertiary {
            background: linear-gradient(135deg, #ffa726 0%, #ff9800 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .reading-area {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 300px;
            text-align: center;
            position: relative;
        }

        .reading-area.focus-mode {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
            border-radius: 0;
            margin: 0;
        }

        .current-char {
            font-size: 4rem;
            font-weight: 700;
            line-height: 1;
            transition: all 0.1s ease;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            word-break: break-all;
            overflow-wrap: break-word;
            max-width: 100%;
        }

        .progress-info {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .progress-bar {
            width: 100%;
            max-width: 400px;
            height: 8px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50 0%, #45a049 100%);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .stats {
            display: flex;
            gap: 20px;
            font-size: 0.9rem;
            color: #666;
            flex-wrap: wrap;
            justify-content: center;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-weight: 700;
            font-size: 1.1rem;
            color: #333;
        }

        .focus-hint {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .reading-area.focus-mode .focus-hint {
            opacity: 1;
        }

        .focus-controls {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 10;
        }

        .reading-area.show-controls .focus-controls {
            opacity: 1;
        }

        .focus-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            min-width: 80px;
        }

        .focus-btn-primary {
            background: rgba(76, 175, 80, 0.9);
        }

        .focus-btn-secondary {
            background: rgba(255, 123, 123, 0.9);
        }

        .focus-btn-tertiary {
            background: rgba(255, 167, 38, 0.9);
        }

        .focus-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .timer-display {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .reading-area.focus-mode .timer-display {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .controls {
                padding: 20px;
            }

            .current-char {
                font-size: 3rem;
                min-height: 60px;
            }

            .reading-area {
                padding: 20px;
                min-height: 250px;
            }

            .control-row {
                flex-direction: column;
                align-items: stretch;
            }

            .control-row > * {
                width: 100%;
            }

            .buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .focus-controls {
                bottom: 20px;
                gap: 10px;
            }

            .focus-btn {
                padding: 10px 15px;
                font-size: 0.9rem;
                min-width: 70px;
            }

            .timer-display {
                top: 15px;
                left: 15px;
                font-size: 0.9rem;
                padding: 6px 12px;
            }

            .focus-hint {
                top: 15px;
                right: 15px;
                font-size: 0.75rem;
                padding: 6px 10px;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš¡ ë¹ ë¥¸ ì½ê¸° í›ˆë ¨</h1>
            <p>ê¸€ì ë‹¨ìœ„ ë¹ ë¥¸ ì½ê¸°ë¡œ ê¸°ë¶„ê³¼ ì§‘ì¤‘ë ¥ì„ í–¥ìƒì‹œì¼œë³´ì„¸ìš”</p>
            <p style="font-size: 0.75rem; margin-top: 5px; opacity: 0.7;">ğŸ’¾ ì„¤ì • ìë™ ì €ì¥ | âš ï¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì„¸ì…˜ ë™ì•ˆë§Œ ìœ ì§€ (ì‹¤ì œ í™˜ê²½ì—ì„œ ì˜êµ¬ ì €ì¥ ê°€ëŠ¥)</p>
        </div>

        <div class="controls" id="controls">
            <div class="control-group">
                <label>ğŸ“š í…ìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬</label>
                <div class="control-row">
                    <select id="librarySelect" style="flex: 1;">
                        <option value="">ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì„ íƒ...</option>
                    </select>
                    <button type="button" onclick="loadFromLibrary()" style="padding: 8px 15px; border: 2px solid #e1e8ed; border-radius: 10px; background: #f8f9fa; cursor: pointer; font-size: 0.9rem;">ë¶ˆëŸ¬ì˜¤ê¸°</button>
                    <button type="button" onclick="deleteFromLibrary()" style="padding: 8px 15px; border: 2px solid #ff6b6b; border-radius: 10px; background: #ffe0e0; color: #ff6b6b; cursor: pointer; font-size: 0.9rem;">ì‚­ì œ</button>
                </div>
                
                <!-- ìƒˆ í…ìŠ¤íŠ¸ ì¶”ê°€ ì„¹ì…˜ -->
                <div style="margin-top: 15px; padding: 15px; background: rgba(102, 126, 234, 0.05); border-radius: 10px; border: 1px solid rgba(102, 126, 234, 0.2);">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333; font-size: 0.9rem;">ğŸ“ ìƒˆ í…ìŠ¤íŠ¸ ì¶”ê°€</label>
                    <input type="text" id="newLibraryName" placeholder="í…ìŠ¤íŠ¸ ì´ë¦„" style="width: 100%; padding: 8px 12px; border: 2px solid #e1e8ed; border-radius: 10px; font-size: 0.9rem; margin-bottom: 8px;">
                    <textarea id="newLibraryText" placeholder="ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." style="width: 100%; height: 100px; padding: 8px 12px; border: 2px solid #e1e8ed; border-radius: 10px; font-size: 0.9rem; resize: vertical; font-family: inherit; margin-bottom: 8px;"></textarea>
                    <div class="control-row">
                        <button type="button" onclick="addTextToLibrary()" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); color: white; cursor: pointer; font-size: 0.9rem; font-weight: 600;">ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì¶”ê°€</button>
                        <button type="button" onclick="addCurrentToLibrary()" style="flex: 1; padding: 10px; border: none; border-radius: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; cursor: pointer; font-size: 0.9rem; font-weight: 600; margin-left: 8px;">í˜„ì¬ í…ìŠ¤íŠ¸ ì¶”ê°€</button>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label>ğŸ² ì¬ìƒ ëª¨ë“œ</label>
                <div class="control-row">
                    <select id="playbackMode">
                        <option value="repeat">ë°˜ë³µ ì¬ìƒ</option>
                        <option value="random">ëœë¤ ì¬ìƒ</option>
                    </select>
                </div>
                <div style="margin-top: 5px; font-size: 0.75rem; color: #666;">
                    ëœë¤ ëª¨ë“œ: í…ìŠ¤íŠ¸ê°€ ëë‚˜ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ë‹¤ë¥¸ í…ìŠ¤íŠ¸ë¥¼ ìë™ ì„ íƒ
                </div>
            </div>

            <div class="control-group">
                <label>ğŸ“„ í…ìŠ¤íŠ¸ íŒŒì¼ ì„ íƒ</label>
                <div class="file-input-wrapper">
                    <input type="file" id="fileInput" accept=".txt">
                    <label for="fileInput" class="file-input-label">í…ìŠ¤íŠ¸ íŒŒì¼ ì„ íƒ (.txt)</label>
                </div>
            </div>

            <div class="control-group">
                <label>âš¡ ì†ë„ ì„¤ì • (ë°€ë¦¬ì´ˆ)</label>
                <div class="control-row">
                    <input type="range" id="startSpeed" min="40" max="500" value="200">
                    <input type="number" id="startSpeedNum" min="40" max="500" value="200">
                    <span>â†’</span>
                    <input type="range" id="endSpeed" min="40" max="500" value="40">
                    <input type="number" id="endSpeedNum" min="40" max="500" value="40">
                </div>
                <div style="margin-top: 10px;">
                    <label style="margin-bottom: 5px;">ì ì§„ì  ë³€í™” ì‹œê°„ (ì´ˆ)</label>
                    <div class="control-row">
                        <input type="range" id="transitionDuration" min="0" max="60" value="10">
                        <input type="number" id="transitionDurationNum" min="0" max="60" value="10">
                    </div>
                    <div style="margin-top: 5px; font-size: 0.75rem; color: #666; line-height: 1.3;">
                        <strong>0ì´ˆ</strong>: ì²˜ìŒë¶€í„° ëê¹Œì§€ ê³ ì • ì†ë„ (ì‹œì‘ ì†ë„ë¡œë§Œ ì§„í–‰)<br>
                        <strong>10ì´ˆ</strong>: í›ˆë ¨ ì‹œì‘ í›„ ì •í™•íˆ 10ì´ˆ ë™ì•ˆ ì‹œì‘â†’ë ì†ë„ë¡œ ë³€í™”<br>
                        <strong>30ì´ˆ ì´ìƒ</strong>: 30ì´ˆ í›„ ìµœê³  ì†ë„ ë„ë‹¬, ì´í›„ ê³„ì† ìœ ì§€ (í…ìŠ¤íŠ¸ ë°˜ë³µì‹œì—ë„ ìœ ì§€)
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label>ğŸ¨ ë””ìŠ¤í”Œë ˆì´ ì„¤ì •</label>
                <div class="control-row">
                    <select id="fontFamily">
                        <option value="'Noto Sans KR', Arial, sans-serif">Noto Sans KR</option>
                        <option value="'Malgun Gothic', sans-serif">ë§‘ì€ ê³ ë”•</option>
                        <option value="'Nanum Gothic', sans-serif">ë‚˜ëˆ”ê³ ë”•</option>
                        <option value="monospace">Monospace</option>
                    </select>
                    <input type="range" id="fontSize" min="20" max="900" value="40" step="10">
                    <input type="number" id="fontSizeNum" min="20" max="900" value="40" step="10">
                    <span>px</span>
                </div>
                <div class="control-row" style="margin-top: 10px;">
                    <input type="color" id="textColor" value="#333333">
                    <span>í…ìŠ¤íŠ¸</span>
                    <input type="color" id="bgColor" value="#ffffff">
                    <span>ë°°ê²½</span>
                </div>
                <div style="margin-top: 5px; font-size: 0.75rem; color: #666;">
                    í° í°íŠ¸ í¬ê¸°(300px+)ëŠ” ëª°ì…ë„ í–¥ìƒì— ë„ì›€ì´ ë˜ì§€ë§Œ, í™”ë©´ í¬ê¸°ë¥¼ ê³ ë ¤í•˜ì„¸ìš”
                </div>
            </div>

            <div class="control-group">
                <label>ğŸ“– ì½ê¸° ëª¨ë“œ</label>
                <div class="control-row">
                    <select id="readingMode">
                        <option value="char">ê¸€ì ë‹¨ìœ„</option>
                        <option value="word">ë‹¨ì–´ ë‹¨ìœ„</option>
                    </select>
                </div>
            </div>

            <div class="control-group">
                <label>â° í›ˆë ¨ ì‹œê°„ ì„¤ì •</label>
                <div class="control-row">
                    <input type="number" id="timerMinutes" min="0" max="60" value="5" style="width: 80px;">
                    <span>ë¶„</span>
                    <input type="number" id="timerSeconds" min="0" max="59" value="0" style="width: 80px;">
                    <span>ì´ˆ</span>
                    <span style="font-size: 0.8rem; color: #666;">(0ë¶„ 0ì´ˆ = ë¬´ì œí•œ)</span>
                </div>
            </div>

            <div class="buttons">
                <button class="btn btn-primary" onclick="startReading()" id="startBtn">â–¶ï¸ ì‹œì‘</button>
                <button class="btn btn-secondary" onclick="pauseReading()" id="pauseBtn" disabled>â¸ï¸ ì¼ì‹œì •ì§€</button>
                <button class="btn btn-tertiary" onclick="stopReading()" id="stopBtn" disabled>â¹ï¸ ì •ì§€</button>
            </div>
        </div>

        <div class="reading-area" id="readingArea" onclick="toggleFocusMode()">
            <div class="focus-hint">í™”ë©´ì„ í„°ì¹˜í•˜ë©´ ì§‘ì¤‘ ëª¨ë“œê°€ í•´ì œë©ë‹ˆë‹¤</div>
            <div class="timer-display" id="timerDisplay">05:00</div>
            <div class="current-char" id="currentChar">í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•˜ê³  ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</div>
            <div class="focus-controls" id="focusControls">
                <button class="focus-btn focus-btn-primary" onclick="event.stopPropagation(); resumeReading()" id="focusResumeBtn">â–¶ï¸ ì¬ê°œ</button>
                <button class="focus-btn focus-btn-secondary" onclick="event.stopPropagation(); pauseReading()" id="focusPauseBtn">â¸ï¸ ì¼ì‹œì •ì§€</button>
                <button class="focus-btn focus-btn-tertiary" onclick="event.stopPropagation(); stopReading()" id="focusStopBtn">â¹ï¸ ì •ì§€</button>
            </div>
            <div class="progress-info">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="progressText">0%</div>
                        <div id="progressLabel">ì§„í–‰ë¥ </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="currentSpeed">200</div>
                        <div>í˜„ì¬ ì†ë„ (ms)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="elapsed">00:00</div>
                        <div>ê²½ê³¼ ì‹œê°„</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let text = '';
        let processedText = '';
        let currentIndex = 0;
        let isReading = false;
        let isPaused = false;
        let startTime = 0;
        let currentTimeout;
        let focusTimeout;
        let isFocusMode = false;
        let timerInterval;
        let totalTimerMs = 0;
        let remainingTimerMs = 0;
        let textRepeatCount = 0;
        let textLibrary = [
            {
                name: 'ìƒ˜í”Œ í…ìŠ¤íŠ¸ - ë¹ ë¥¸ ì½ê¸° ì†Œê°œ',
                content: 'ë¹ ë¥¸ ì½ê¸° í›ˆë ¨ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ì´ ê¸°ìˆ ì€ ì—¬ëŸ¬ë¶„ì˜ ì½ê¸° ì†ë„ì™€ ì§‘ì¤‘ë ¥ì„ ë™ì‹œì— í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆëŠ” ë†€ë¼ìš´ ë°©ë²•ì…ë‹ˆë‹¤. ì—°êµ¬ì— ë”°ë¥´ë©´ ê¸€ìë¥¼ ë¹ ë¥´ê²Œ ì œì‹œí–ˆì„ ë•Œ ê¸°ë¶„ì´ í˜„ì €íˆ í–¥ìƒë˜ëŠ” ê²ƒìœ¼ë¡œ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤. ì´ëŠ” í…ìŠ¤íŠ¸ì˜ ë‚´ìš©ì´ ê¸ì •ì ì´ë“  ë¶€ì •ì ì´ë“  ê´€ê³„ì—†ì´ ë‚˜íƒ€ë‚˜ëŠ” í˜„ìƒì…ë‹ˆë‹¤. ë¹ ë¥¸ ì½ê¸°ëŠ” ì¡°ì¦ê³¼ ìœ ì‚¬í•œ ìƒíƒœë¥¼ ìœ ë„í•˜ì—¬ ì£¼ê´€ì ì¸ í˜, ì°½ì˜ì„±, ì—ë„ˆì§€ ì¦ê°€ë¥¼ ê°€ì ¸ë‹¤ì¤ë‹ˆë‹¤. ì§€ê¸ˆë¶€í„° ì´ í›Œë¥­í•œ í›ˆë ¨ì„ ì‹œì‘í•´ë³´ì„¸ìš”.'
            }
        ];
        let lastLoadedText = null;
        let settings = {
            startSpeed: 200,
            endSpeed: 40,
            transitionDuration: 10,
            fontSize: 40,
            fontFamily: "'Noto Sans KR', Arial, sans-serif",
            textColor: '#333333',
            bgColor: '#ffffff',
            readingMode: 'char',
            timerMinutes: 5,
            timerSeconds: 0,
            playbackMode: 'repeat'
        };

        // ìš”ì†Œë“¤
        const fileInput = document.getElementById('fileInput');
        const librarySelect = document.getElementById('librarySelect');
        const newLibraryName = document.getElementById('newLibraryName');
        const newLibraryText = document.getElementById('newLibraryText');
        const playbackMode = document.getElementById('playbackMode');
        const startSpeedRange = document.getElementById('startSpeed');
        const startSpeedNum = document.getElementById('startSpeedNum');
        const endSpeedRange = document.getElementById('endSpeed');
        const endSpeedNum = document.getElementById('endSpeedNum');
        const transitionRange = document.getElementById('transitionDuration');
        const transitionNum = document.getElementById('transitionDurationNum');
        const fontFamily = document.getElementById('fontFamily');
        const fontSizeRange = document.getElementById('fontSize');
        const fontSizeNum = document.getElementById('fontSizeNum');
        const textColor = document.getElementById('textColor');
        const bgColor = document.getElementById('bgColor');
        const readingMode = document.getElementById('readingMode');
        const timerMinutes = document.getElementById('timerMinutes');
        const timerSeconds = document.getElementById('timerSeconds');
        const currentChar = document.getElementById('currentChar');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const progressLabel = document.getElementById('progressLabel');
        const currentSpeedDisplay = document.getElementById('currentSpeed');
        const elapsed = document.getElementById('elapsed');
        const timerDisplay = document.getElementById('timerDisplay');
        const readingArea = document.getElementById('readingArea');
        const controls = document.getElementById('controls');
        const focusControls = document.getElementById('focusControls');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const stopBtn = document.getElementById('stopBtn');
        const focusResumeBtn = document.getElementById('focusResumeBtn');
        const focusPauseBtn = document.getElementById('focusPauseBtn');
        const focusStopBtn = document.getElementById('focusStopBtn');

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        fileInput.addEventListener('change', handleFileSelect);
        
        // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
        timerMinutes.addEventListener('input', () => {
            settings.timerMinutes = parseInt(timerMinutes.value) || 0;
            updateTimerDisplay();
        });
        timerSeconds.addEventListener('input', () => {
            settings.timerSeconds = parseInt(timerSeconds.value) || 0;
            updateTimerDisplay();
        });
        
        // ì†ë„ ë™ê¸°í™”
        startSpeedRange.addEventListener('input', () => {
            startSpeedNum.value = startSpeedRange.value;
            settings.startSpeed = parseInt(startSpeedRange.value);
        });
        startSpeedNum.addEventListener('input', () => {
            startSpeedRange.value = startSpeedNum.value;
            settings.startSpeed = parseInt(startSpeedNum.value);
        });
        endSpeedRange.addEventListener('input', () => {
            endSpeedNum.value = endSpeedRange.value;
            settings.endSpeed = parseInt(endSpeedRange.value);
        });
        endSpeedNum.addEventListener('input', () => {
            endSpeedRange.value = endSpeedNum.value;
            settings.endSpeed = parseInt(endSpeedNum.value);
        });
        transitionRange.addEventListener('input', () => {
            transitionNum.value = transitionRange.value;
            settings.transitionDuration = parseInt(transitionRange.value);
        });
        transitionNum.addEventListener('input', () => {
            transitionRange.value = transitionNum.value;
            settings.transitionDuration = parseInt(transitionNum.value);
        });
        fontSizeRange.addEventListener('input', () => {
            fontSizeNum.value = fontSizeRange.value;
            settings.fontSize = parseInt(fontSizeRange.value);
            updateFontSize();
        });
        fontSizeNum.addEventListener('input', () => {
            fontSizeRange.value = fontSizeNum.value;
            settings.fontSize = parseInt(fontSizeNum.value);
            updateFontSize();
        });

        // ìŠ¤íƒ€ì¼ ë³€ê²½ ì´ë²¤íŠ¸
        fontFamily.addEventListener('change', () => {
            settings.fontFamily = fontFamily.value;
            updateFontFamily();
        });
        textColor.addEventListener('change', () => {
            settings.textColor = textColor.value;
            updateTextColor();
        });
        bgColor.addEventListener('change', () => {
            settings.bgColor = bgColor.value;
            updateBgColor();
        });
        readingMode.addEventListener('change', () => {
            settings.readingMode = readingMode.value;
            if (text) {
                processedText = processText(text);
                currentChar.textContent = `í…ìŠ¤íŠ¸ê°€ ì¬ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. (${processedText.length}${readingMode.value === 'word' ? 'ë‹¨ì–´' : 'ì'}) ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.`;
                resetProgress();
            }
        });

        playbackMode.addEventListener('change', () => {
            settings.playbackMode = playbackMode.value;
        });

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                if (isReading && !isPaused) {
                    pauseReading();
                } else if (isPaused) {
                    resumeReading();
                } else if (text) {
                    startReading();
                }
            } else if (e.code === 'Escape') {
                if (isReading) {
                    stopReading();
                }
                if (isFocusMode) {
                    exitFocusMode();
                }
            }
        });

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file && file.type === 'text/plain') {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const rawText = e.target.result;
                    loadText(rawText, file.name);
                };
                reader.readAsText(file, 'UTF-8');
            }
        }

        function loadText(rawText, filename = '') {
            text = rawText;
            lastLoadedText = { content: rawText, name: filename };
            processedText = processText(rawText);
            currentChar.textContent = `í…ìŠ¤íŠ¸ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. (${processedText.length}ì) ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.`;
            resetProgress();
        }

        function processText(rawText) {
            const mode = readingMode.value;
            if (mode === 'word') {
                // ë‹¨ì–´ ëª¨ë“œ: ì—¬ëŸ¬ ê³µë°±ì„ í•˜ë‚˜ë¡œ í†µí•©í•˜ê³  split
                return rawText.replace(/\s+/g, ' ').trim().split(' ').filter(word => word.length > 0);
            } else {
                // ê¸€ì ëª¨ë“œ: ëª¨ë“  ê³µë°± ë¬¸ì ì œê±°
                return rawText.replace(/\s/g, '').split('').filter(char => char.length > 0);
            }
        }

        function populateLibrary() {
            librarySelect.innerHTML = '<option value="">ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì„ íƒ...</option>';
            textLibrary.forEach((item, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${item.name} (${item.content.length}ì)`;
                librarySelect.appendChild(option);
            });
        }

        function loadFromLibrary() {
            const selectedIndex = librarySelect.value;
            if (selectedIndex !== '') {
                const selectedItem = textLibrary[selectedIndex];
                loadText(selectedItem.content, selectedItem.name);
            }
        }

        function addTextToLibrary() {
            const name = newLibraryName.value.trim();
            const content = newLibraryText.value.trim();
            
            if (!name) {
                alert('í…ìŠ¤íŠ¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            if (!content) {
                alert('í…ìŠ¤íŠ¸ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            textLibrary.push({
                name: name,
                content: content
            });
            
            populateLibrary();
            saveLibraryToStorage();
            newLibraryName.value = '';
            newLibraryText.value = '';
            alert(`"${name}"ì´(ê°€) ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        function addCurrentToLibrary() {
            const name = newLibraryName.value.trim();
            if (!name) {
                alert('ë¼ì´ë¸ŒëŸ¬ë¦¬ í•­ëª© ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            if (!text) {
                alert('ì¶”ê°€í•  í…ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € í…ìŠ¤íŠ¸ë¥¼ ë¡œë“œí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            textLibrary.push({
                name: name,
                content: text
            });
            
            populateLibrary();
            saveLibraryToStorage();
            newLibraryName.value = '';
            alert(`"${name}"ì´(ê°€) ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        function deleteFromLibrary() {
            const selectedIndex = librarySelect.value;
            if (selectedIndex === '') {
                alert('ì‚­ì œí•  í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const selectedItem = textLibrary[selectedIndex];
            if (confirm(`"${selectedItem.name}"ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                textLibrary.splice(selectedIndex, 1);
                populateLibrary();
                saveLibraryToStorage();
                alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        function loadRandomText() {
            if (textLibrary.length <= 1) return;
            
            // í˜„ì¬ í…ìŠ¤íŠ¸ì™€ ë‹¤ë¥¸ ê²ƒ ì¤‘ì—ì„œ ëœë¤ ì„ íƒ
            const availableTexts = textLibrary.filter(item => item.content !== text);
            if (availableTexts.length === 0) return;
            
            const randomIndex = Math.floor(Math.random() * availableTexts.length);
            const randomText = availableTexts[randomIndex];
            
            // ìƒˆ í…ìŠ¤íŠ¸ë¡œ ë³€ê²½í•˜ë˜ ì¸ë±ìŠ¤ëŠ” ë¦¬ì…‹
            text = randomText.content;
            processedText = processText(randomText.content);
            currentIndex = 0;
            textRepeatCount++;
            
            // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ (ì§‘ì¤‘ ëª¨ë“œì—ì„œëŠ” ë³´ì´ì§€ ì•ŠìŒ)
            console.log(`ğŸ² ëœë¤ ì„ íƒ: ${randomText.name}`);
        }

        function saveLibraryToStorage() {
            // ë©”ëª¨ë¦¬ì—ë§Œ ì €ì¥ (Claude.ai í™˜ê²½ì—ì„œëŠ” localStorage ì§€ì› ì•ˆí•¨)
            // ìì‹ ì˜ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ ì•„ë˜ ì£¼ì„ì„ í•´ì œí•˜ì„¸ìš”:
            // try {
            //     localStorage.setItem('speedReadingLibrary', JSON.stringify(textLibrary));
            // } catch (e) {
            //     console.log('ë¡œì»¬ ì €ì¥ì†Œ ì €ì¥ ì‹¤íŒ¨:', e);
            // }
        }

        function loadLibraryFromStorage() {
            // ë©”ëª¨ë¦¬ì—ì„œë§Œ ë¡œë“œ (Claude.ai í™˜ê²½ì—ì„œëŠ” localStorage ì§€ì› ì•ˆí•¨)
            // ìì‹ ì˜ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ ì•„ë˜ ì£¼ì„ì„ í•´ì œí•˜ì„¸ìš”:
            // try {
            //     const saved = localStorage.getItem('speedReadingLibrary');
            //     if (saved) {
            //         const savedLibrary = JSON.parse(saved);
            //         textLibrary = [...textLibrary, ...savedLibrary];
            //     }
            // } catch (e) {
            //     console.log('ë¡œì»¬ ì €ì¥ì†Œ ë¡œë“œ ì‹¤íŒ¨:', e);
            // }
        }

        function loadSampleText() {
            // ìƒ˜í”Œ í…ìŠ¤íŠ¸ëŠ” ì´ì œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì²« ë²ˆì§¸ í•­ëª©ìœ¼ë¡œ ì²˜ë¦¬
            if (textLibrary.length > 0) {
                loadText(textLibrary[0].content, textLibrary[0].name);
            }
        }

        function startReading() {
            if (!text) {
                alert('ë¨¼ì € í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            // í˜„ì¬ ì½ê¸° ëª¨ë“œì— ë§ê²Œ í…ìŠ¤íŠ¸ ì¬ì²˜ë¦¬
            processedText = processText(text);

            isReading = true;
            isPaused = false;
            startTime = Date.now();
            textRepeatCount = 0;
            currentIndex = 0;
            
            // íƒ€ì´ë¨¸ ì„¤ì •
            totalTimerMs = (settings.timerMinutes * 60 + settings.timerSeconds) * 1000;
            remainingTimerMs = totalTimerMs;
            
            startBtn.disabled = true;
            pauseBtn.disabled = false;
            stopBtn.disabled = false;

            // ì§‘ì¤‘ ëª¨ë“œ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            updateFocusButtons();

            if (totalTimerMs > 0) {
                startTimer();
                progressLabel.textContent = 'í›ˆë ¨ ì‹œê°„';
            } else {
                progressLabel.textContent = 'í…ìŠ¤íŠ¸ ì§„í–‰ë¥ ';
            }

            enterFocusMode();
            displayNextItem();
        }

        function pauseReading() {
            isPaused = true;
            if (currentTimeout) {
                clearTimeout(currentTimeout);
            }
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            startBtn.textContent = 'â–¶ï¸ ì¬ê°œ';
            
            updateFocusButtons();
        }

        function resumeReading() {
            if (!isReading) {
                startReading();
                return;
            }
            
            isPaused = false;
            startBtn.disabled = true;
            pauseBtn.disabled = false;
            startBtn.textContent = 'â–¶ï¸ ì‹œì‘';
            
            if (totalTimerMs > 0 && remainingTimerMs > 0) {
                startTimer();
            }
            
            updateFocusButtons();
            
            // ì¬ê°œì‹œ ìë™ìœ¼ë¡œ ì§‘ì¤‘ ëª¨ë“œë¡œ ì „í™˜
            if (isFocusMode) {
                readingArea.classList.remove('show-controls');
                resetFocusTimeout();
            }
            
            displayNextItem();
        }

        function stopReading() {
            isReading = false;
            isPaused = false;
            if (currentTimeout) {
                clearTimeout(currentTimeout);
            }
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            stopBtn.disabled = true;
            startBtn.textContent = 'â–¶ï¸ ì‹œì‘';
            
            exitFocusMode();
            resetProgress();
            updateFocusButtons();
            progressLabel.textContent = 'ì§„í–‰ë¥ ';
            currentChar.textContent = 'í›ˆë ¨ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œì‘í•˜ë ¤ë©´ ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.';
        }

        function displayNextItem() {
            if (!isReading || isPaused) return;

            if (currentIndex >= processedText.length) {
                // í…ìŠ¤íŠ¸ê°€ ëë‚¬ì„ ë•Œ
                if (totalTimerMs > 0 && remainingTimerMs > 0) {
                    // íƒ€ì´ë¨¸ê°€ ë‚¨ì•˜ì„ ë•Œ
                    const mode = playbackMode.value;
                    if (mode === 'random' && textLibrary.length > 1) {
                        // ëœë¤ ëª¨ë“œ: ë‹¤ë¥¸ í…ìŠ¤íŠ¸ ì„ íƒ
                        loadRandomText();
                    } else {
                        // ë°˜ë³µ ëª¨ë“œ: ê°™ì€ í…ìŠ¤íŠ¸ ë°˜ë³µ
                        currentIndex = 0;
                        textRepeatCount++;
                    }
                } else {
                    stopReading();
                    return;
                }
            }

            const currentItem = processedText[currentIndex];
            currentChar.textContent = currentItem;

            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            const totalItems = processedText.length;
            let displayProgress;
            
            if (totalTimerMs > 0) {
                // íƒ€ì´ë¨¸ê°€ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ íƒ€ì´ë¨¸ ê¸°ì¤€ìœ¼ë¡œ ì§„í–‰ë¥  ê³„ì‚°
                const timerProgress = ((totalTimerMs - remainingTimerMs) / totalTimerMs) * 100;
                displayProgress = Math.min(100, Math.max(0, timerProgress));
                progressText.textContent = Math.round(displayProgress) + '%';
            } else {
                // íƒ€ì´ë¨¸ê°€ ì—†ìœ¼ë©´ í…ìŠ¤íŠ¸ ì§„í–‰ë¥  ê¸°ì¤€
                const textProgress = ((textRepeatCount * totalItems + currentIndex) / totalItems) * 100;
                displayProgress = Math.min(100, textProgress);
                progressText.textContent = Math.round(displayProgress) + '%';
            }
            
            progressFill.style.width = displayProgress + '%';

            // ê²½ê³¼ ì‹œê°„ ì—…ë°ì´íŠ¸
            const elapsedMs = Date.now() - startTime;
            const minutes = Math.floor(elapsedMs / 60000);
            const seconds = Math.floor((elapsedMs % 60000) / 1000);
            elapsed.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            // í˜„ì¬ ì†ë„ ê³„ì‚° (ì‹œê°„ ê¸°ë°˜)
            const currentSpeed = getCurrentSpeed();
            currentSpeedDisplay.textContent = Math.round(currentSpeed);

            currentIndex++;

            // ë‹¤ìŒ ì•„ì´í…œ ì˜ˆì•½
            currentTimeout = setTimeout(() => {
                displayNextItem();
            }, currentSpeed);
        }

        function getCurrentSpeed() {
            const startSpeed = settings.startSpeed;
            const endSpeed = settings.endSpeed;
            const transitionDuration = settings.transitionDuration;

            if (transitionDuration === 0) {
                return startSpeed;
            }

            // ì‹œê°„ ê¸°ë°˜ìœ¼ë¡œ ì†ë„ ê³„ì‚° (í…ìŠ¤íŠ¸ ì§„í–‰ë¥ ê³¼ ë¬´ê´€)
            const elapsedSeconds = (Date.now() - startTime) / 1000;
            
            if (elapsedSeconds >= transitionDuration) {
                // ì„¤ì •ëœ ë³€í™” ì‹œê°„ì´ ì§€ë‚˜ë©´ ìµœì¢… ì†ë„ë¡œ ê³ ì •
                return endSpeed;
            }
            
            // ë³€í™” ì‹œê°„ ë™ì•ˆë§Œ ì ì§„ì ìœ¼ë¡œ ë³€í™”
            const progressRatio = elapsedSeconds / transitionDuration;
            const speedDiff = endSpeed - startSpeed;
            const currentSpeed = startSpeed + (speedDiff * progressRatio);
            
            return Math.max(endSpeed, Math.min(startSpeed, currentSpeed));
        }

        function enterFocusMode() {
            isFocusMode = true;
            readingArea.classList.add('focus-mode');
            controls.classList.add('hidden');
            readingArea.classList.remove('show-controls');
            resetFocusTimeout();
        }

        function exitFocusMode() {
            isFocusMode = false;
            readingArea.classList.remove('focus-mode');
            controls.classList.remove('hidden');
            readingArea.classList.remove('show-controls');
            if (focusTimeout) {
                clearTimeout(focusTimeout);
            }
        }

        function toggleFocusMode() {
            if (isReading) {
                if (isFocusMode) {
                    // ì§‘ì¤‘ ëª¨ë“œ í•´ì œì‹œ ìë™ ì¼ì‹œì •ì§€
                    if (!isPaused) {
                        pauseReading();
                    }
                    readingArea.classList.add('show-controls');
                    updateFocusButtons();
                } else {
                    readingArea.classList.remove('show-controls');
                    enterFocusMode();
                }
            }
        }

        function resetFocusTimeout() {
            if (focusTimeout) {
                clearTimeout(focusTimeout);
            }
            if (isReading && !isFocusMode && !isPaused) {
                focusTimeout = setTimeout(() => {
                    if (isReading && !isPaused) {
                        enterFocusMode();
                    }
                }, 3000);
            }
        }

        function updateFocusButtons() {
            if (isPaused) {
                focusResumeBtn.style.display = 'block';
                focusPauseBtn.style.display = 'none';
            } else {
                focusResumeBtn.style.display = 'none';
                focusPauseBtn.style.display = 'block';
            }
        }

        function loadSettings() {
            // ì„¤ì •ê°’ë“¤ì„ UIì— ì ìš©
            startSpeedRange.value = settings.startSpeed;
            startSpeedNum.value = settings.startSpeed;
            endSpeedRange.value = settings.endSpeed;
            endSpeedNum.value = settings.endSpeed;
            transitionRange.value = settings.transitionDuration;
            transitionNum.value = settings.transitionDuration;
            fontSizeRange.value = settings.fontSize;
            fontSizeNum.value = settings.fontSize;
            fontFamily.value = settings.fontFamily;
            textColor.value = settings.textColor;
            bgColor.value = settings.bgColor;
            readingMode.value = settings.readingMode;
            timerMinutes.value = settings.timerMinutes;
            timerSeconds.value = settings.timerSeconds;
            playbackMode.value = settings.playbackMode;
        }

        function updateFontFamily() {
            currentChar.style.fontFamily = fontFamily.value;
        }

        function updateFontSize() {
            currentChar.style.fontSize = fontSizeNum.value + 'px';
        }

        function updateTextColor() {
            currentChar.style.color = textColor.value;
        }

        function updateBgColor() {
            readingArea.style.background = bgColor.value;
        }

        function resetProgress() {
            currentIndex = 0;
            textRepeatCount = 0;
            progressFill.style.width = '0%';
            progressText.textContent = '0%';
            progressLabel.textContent = 'ì§„í–‰ë¥ ';
            currentSpeedDisplay.textContent = settings.startSpeed;
            elapsed.textContent = '00:00';
            
            // íƒ€ì´ë¨¸ ë¦¬ì…‹
            totalTimerMs = (settings.timerMinutes * 60 + settings.timerSeconds) * 1000;
            remainingTimerMs = totalTimerMs;
            updateTimerDisplay();
        }

        function startTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            timerInterval = setInterval(() => {
                remainingTimerMs -= 1000;
                updateTimerDisplay();
                
                if (remainingTimerMs <= 0) {
                    stopReading();
                    alert('â° ì„¤ì •ëœ í›ˆë ¨ ì‹œê°„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            if (isReading && totalTimerMs > 0) {
                // í›ˆë ¨ ì¤‘ì¼ ë•ŒëŠ” ë‚¨ì€ ì‹œê°„ í‘œì‹œ
                const remainingMinutes = Math.floor(remainingTimerMs / 60000);
                const remainingSeconds = Math.floor((remainingTimerMs % 60000) / 1000);
                timerDisplay.textContent = `${remainingMinutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
            } else {
                // ì„¤ì •ëœ ì‹œê°„ í‘œì‹œ
                timerDisplay.textContent = `${settings.timerMinutes.toString().padStart(2, '0')}:${settings.timerSeconds.toString().padStart(2, '0')}`;
            }
        }

        // ì´ˆê¸° ìŠ¤íƒ€ì¼ ì ìš©
        loadLibraryFromStorage();
        loadSettings();
        updateFontFamily();
        updateFontSize();
        updateTextColor();
        updateBgColor();
        updateTimerDisplay();
        updateFocusButtons();
        populateLibrary();
        
        // í˜ì´ì§€ ë¡œë“œì‹œ ìƒ˜í”Œ í…ìŠ¤íŠ¸ ìë™ ë¡œë”©
        if (textLibrary.length > 0) {
            loadText(textLibrary[0].content, textLibrary[0].name);
        }
    </script>
</body>
</html>